---
import Layout from '../layouts/Layout.astro';
import ThemeToggle from '../components/ThemeToggle.astro';
---

<Layout title="OG Miner | Developer Documentation">
	<header class="sticky top-0 z-50 bg-white/90 dark:bg-[#0d1117]/90 backdrop-blur border-b border-border dark:border-gray-800">
		<div class="max-w-6xl mx-auto px-6 h-16 flex justify-between items-center">
			<div class="font-bold text-xl text-text dark:text-gray-100 flex items-center gap-3">
				<img src={`${import.meta.env.BASE_URL}/assets/og-miner-logo.png`} alt="OG Miner Logo" class="h-8 w-auto object-contain" />
				<span class="tracking-tight">OG Miner</span>
			</div>
			<nav class="hidden md:flex items-center gap-8 text-sm font-medium">
				<a href="#features" class="text-muted dark:text-gray-400 hover:text-primary transition-colors">Features</a>
				<a href="#docs" class="text-muted dark:text-gray-400 hover:text-primary transition-colors">API Reference</a>
				<a href="#guides" class="text-muted dark:text-gray-400 hover:text-primary transition-colors">Guides</a>
				<ThemeToggle />
				<a href="https://rapidapi.com/" target="_blank" class="bg-primary text-white hover:bg-amber-700 px-5 py-2.5 rounded-full font-semibold transition-all shadow-sm hover:shadow-md">Get API Key</a>
			</nav>
		</div>
	</header>

	<main class="flex-1 max-w-5xl mx-auto px-6 py-12 w-full">
		<section class="text-center py-16 border-b border-border dark:border-gray-800 mb-12">
			<h1 class="text-5xl md:text-6xl font-extrabold mb-6 tracking-tight text-text dark:text-white">
				OG Miner: <span class="text-primary">The OpenGraph Miner</span>
			</h1>
			<div class="relative group mx-auto mb-8 w-fit">
				<img src={`${import.meta.env.BASE_URL}/assets/og-miner-logo.png`} alt="OG Miner Logo" class="h-48 w-auto drop-shadow-2xl transition-transform duration-300 hover:scale-105" />
			</div>
			<p class="text-xl text-muted dark:text-gray-400 max-w-2xl mx-auto leading-relaxed">
				Extract OpenGraph, JSON-LD, and oEmbed from any URL. <br/>
				Handles redirects, SPAs, and bot protection automatically.
			</p>
		</section>

		<section id="features" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-20">
			{[
				{ icon: "‚ö°", title: "High Performance", desc: "Powered by FastAPI and Redis caching for sub-millisecond response times on repeat hits." },
				{ icon: "ü§ñ", title: "Headless Browser", desc: "Built-in Playwright support to render JavaScript-heavy sites like Instagram or React apps." },
				{ icon: "üõ°Ô∏è", title: "Enterprise Ready", desc: "Includes SSRF protection, rate limiting, and User-Agent rotation out of the box." },
				{ icon: "üì¶", title: "Rich Data", desc: "Extracts more than just title/image. Get JSON-LD schemas, Favicons, and Author data." }
			].map(feature => (
				<div class="bg-white dark:bg-[#161b22] border border-border dark:border-gray-800 rounded-xl p-6 hover:border-primary transition-all group hover:shadow-lg dark:hover:border-primary">
					<div class="text-2xl mb-4">{feature.icon}</div>
					<h3 class="font-semibold text-lg mb-2 text-text dark:text-gray-200 group-hover:text-primary transition-colors">{feature.title}</h3>
					<p class="text-sm text-muted dark:text-gray-400">{feature.desc}</p>
				</div>
			))}
		</section>

		<section id="docs" class="mb-20">
			<h2 class="text-3xl font-bold mb-6">API Reference</h2>
			
			<div class="bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-700/30 rounded-lg p-4 mb-8 text-amber-900 dark:text-amber-200 flex items-start gap-3">
				<span>‚ÑπÔ∏è</span>
				<div>
					<strong>Base URL:</strong> <code class="bg-white dark:bg-black/30 border border-amber-200 dark:border-amber-800 px-2 py-1 rounded">https://og-miner.p.rapidapi.com/</code>
				</div>
			</div>

			<div class="mb-12">
				<h3 class="text-2xl font-semibold mb-4 flex items-center gap-3">
				<h3 class="text-2xl font-semibold mb-4 flex items-center gap-3">
					<span class="bg-primary text-white text-xs font-bold px-2 py-1 rounded uppercase tracking-wider">POST</span>
					<span class="font-mono text-lg text-text dark:text-gray-200">/v1/extract</span>
				</h3>
				<p class="text-muted mb-6">Main endpoint to scrape and parse a URL.</p>

				<!-- Code Tabs -->
				<div class="border border-border rounded-lg overflow-hidden bg-card mb-8">
					<div class="flex border-b border-border bg-black/20">
						<button class="code-tab px-6 py-3 text-sm font-medium text-primary border-b-2 border-primary" data-tab="curl">cURL</button>
						<button class="code-tab px-6 py-3 text-sm font-medium text-muted hover:text-text" data-tab="python">Python</button>
						<button class="code-tab px-6 py-3 text-sm font-medium text-muted hover:text-text" data-tab="javascript">JavaScript</button>
					</div>
					
					<div id="code-curl" class="code-content p-6 overflow-x-auto bg-[#0d1117]">
<pre class="text-sm font-mono text-gray-300">curl -X POST "https://og-miner.p.rapidapi.com/v1/extract" \
     -H "Content-Type: application/json" \
     -H "X-RapidAPI-Key: YOUR_RAPIDAPI_KEY" \
     -H "X-RapidAPI-Host: og-miner.p.rapidapi.com" \
     -d '&#123;
           "url": "https://www.github.com",
           "enable_javascript": false
         &#125;'</pre>
					</div>

					<div id="code-python" class="code-content p-6 overflow-x-auto bg-[#0d1117] hidden">
<pre class="text-sm font-mono text-gray-300">import requests

url = "https://og-miner.p.rapidapi.com/v1/extract"
payload = &#123;
    "url": "https://www.github.com",
    "enable_javascript": True
&#125;
headers = &#123;
    "Content-Type": "application/json",
    "X-RapidAPI-Key": "YOUR_RAPIDAPI_KEY",
    "X-RapidAPI-Host": "og-miner.p.rapidapi.com"
&#125;

response = requests.post(url, json=payload, headers=headers)
print(response.json())</pre>
					</div>

					<div id="code-javascript" class="code-content p-6 overflow-x-auto bg-[#0d1117] hidden">
<pre class="text-sm font-mono text-gray-300">const response = await fetch("https://og-miner.p.rapidapi.com/v1/extract", &#123;
    method: "POST",
    headers: &#123;
        "Content-Type": "application/json",
        "X-RapidAPI-Key": "YOUR_RAPIDAPI_KEY",
        "X-RapidAPI-Host": "og-miner.p.rapidapi.com"
    &#125;,
    body: JSON.stringify(&#123;
        url: "https://www.github.com",
        enable_javascript: true
    &#125;)
&#125;);

const data = await response.json();
console.log(data);</pre>
					</div>
				</div>

				<h4 class="text-lg font-semibold mb-4">Parameters</h4>
				<div class="overflow-x-auto border border-border dark:border-gray-800 rounded-lg">
					<table class="w-full text-left text-sm">
						<thead class="bg-card dark:bg-[#161b22] border-b border-border dark:border-gray-800 text-text dark:text-gray-200">
							<tr>
								<th class="p-4 font-medium">Parameter</th>
								<th class="p-4 font-medium">Type</th>
								<th class="p-4 font-medium">Default</th>
								<th class="p-4 font-medium">Description</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-border dark:divide-gray-800">
							{[
								{ name: "url", type: "string", default: "-", desc: "The target URL to scrape (Required)." },
								{ name: "force_refresh", type: "bool", default: "false", desc: "Skip the cache and fetch fresh data." },
								{ name: "enable_javascript", type: "bool", default: "false", desc: "Use a headless browser (Playwright) to render the page. Useful for SPAs." }
							].map(row => (
								<tr class="hover:bg-white/5 dark:hover:bg-white/5">
									<td class="p-4 font-mono text-primary font-semibold">{row.name}</td>
									<td class="p-4 text-muted dark:text-gray-400">{row.type}</td>
									<td class="p-4 text-muted dark:text-gray-400">{row.default}</td>
									<td class="p-4 text-muted dark:text-gray-400">{row.desc}</td>
								</tr>
							))}
						</tbody>
					</table>
				</div>
			</div>

			<div class="mb-12">
				<h4 class="text-lg font-semibold mb-4">Response Structure</h4>
				<p class="text-muted mb-4">The API returns a JSON object split into <code class="bg-black/30 px-2 py-1 rounded">meta</code> (request info) and <code class="bg-black/30 px-2 py-1 rounded">data</code> (extracted content).</p>
				
				<div class="border border-border rounded-lg bg-[#0d1117] p-6 overflow-x-auto mb-6">
<pre class="text-sm font-mono text-blue-300">&#123;
  <span class="text-green-400">"meta"</span>: &#123;
    <span class="text-green-400">"url"</span>: <span class="text-blue-300">"https://github.com"</span>,
    <span class="text-green-400">"domain"</span>: <span class="text-blue-300">"github.com"</span>,
    <span class="text-green-400">"latency_ms"</span>: <span class="text-blue-200">245.5</span>
  &#125;,
  <span class="text-green-400">"data"</span>: &#123;
    <span class="text-green-400">"title"</span>: <span class="text-blue-300">"GitHub: Let's build from here"</span>,
    <span class="text-green-400">"description"</span>: <span class="text-blue-300">"GitHub is where over 100 million developers shape the future of software..."</span>,
    <span class="text-green-400">"image"</span>: <span class="text-blue-300">"https://github.githubassets.com/images/modules/site/social-cards/github-social.png"</span>,
    <span class="text-green-400">"favicon"</span>: <span class="text-blue-300">"https://github.com/favicon.ico"</span>,
    <span class="text-green-400">"site_name"</span>: <span class="text-blue-300">"GitHub"</span>,
    <span class="text-green-400">"oembed"</span>: &#123; ... &#125;,
    <span class="text-green-400">"json_ld"</span>: [ ... ]
  &#125;
&#125;</pre>
				</div>

				<div class="overflow-x-auto border border-border dark:border-gray-800 rounded-lg mb-6">
					<table class="w-full text-left text-sm">
						<thead class="bg-card dark:bg-[#161b22] border-b border-border dark:border-gray-800 text-text dark:text-gray-200">
							<tr>
								<th class="p-4 font-medium">Field</th>
								<th class="p-4 font-medium">Description</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-border dark:divide-gray-800">
							{[
								{ name: "meta.latency_ms", desc: "Time taken to fetch and parse (in milliseconds)." },
								{ name: "data.title", desc: "Best available title (OG > Twitter > HTML Title)." },
								{ name: "data.image", desc: "Absolute URL to the preview image." },
								{ name: "data.oembed", desc: "Rich media data (YouTube video ID, width, height) if available." },
								{ name: "data.json_ld", desc: "Structured data (e.g., Recipe, Product, Event) if found." }
							].map(row => (
								<tr class="hover:bg-white/5 dark:hover:bg-white/5">
									<td class="p-4 font-mono text-primary font-semibold">{row.name}</td>
									<td class="p-4 text-muted dark:text-gray-400">{row.desc}</td>
								</tr>
							))}
						</tbody>
					</table>
				</div>
			</div>
		</section>

		<section id="guides" class="mb-20">
			<h2 class="text-3xl font-bold mb-8">Guides & Use Cases</h2>

			<div class="mb-12">
				<h3 class="text-xl font-semibold mb-4">1. Building a Link Preview Card</h3>
				<p class="text-muted mb-4">Use the API to generate social media style cards for your chat app or forum.</p>
				
				<div class="border border-border rounded-lg bg-[#0d1117] p-6 overflow-x-auto">
<pre class="text-sm font-mono text-gray-300">// Example React Component Logic
const &#123; data &#125; = await api.extract(url);
return (
  &lt;div class="card"&gt;
    &lt;img src=&#123;data.image&#125; /&gt;
    &lt;h3&gt;&#123;data.title&#125;&lt;/h3&gt;
    &lt;p&gt;&#123;data.description&#125;&lt;/p&gt;
    &lt;span&gt;&#123;data.domain&#125;&lt;/span&gt;
  &lt;/div&gt;
);</pre>
				</div>
			</div>

			<div class="mb-12">
				<h3 class="text-xl font-semibold mb-4">2. Handling Single Page Apps (SPAs)</h3>
				<p class="text-muted mb-4">
					Standard scrapers fail on sites like Instagram, TikTok, or dynamic React apps because they return empty HTML.
					OG Miner solves this with the <code class="bg-black/30 px-2 py-1 rounded">enable_javascript</code> flag.
				</p>
				
				<div class="bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-700/30 rounded-lg p-4 mb-6 text-amber-800 dark:text-amber-200 flex items-start gap-3">
					<span>‚ö†Ô∏è</span>
					<div>
						<strong>Note:</strong> Headless requests take longer (2-5s) and may cost more credits on paid plans.
					</div>
				</div>
			</div>

			<div class="mb-12">
				<h3 class="text-xl font-semibold mb-4">3. Error Handling</h3>
				<p class="text-muted mb-4">The API returns standard HTTP codes to help you debug.</p>
				
				<div class="overflow-x-auto border border-border rounded-lg">
					<table class="w-full text-left text-sm">
						<thead class="bg-card border-b border-border text-text">
							<tr>
								<th class="p-4 font-medium">Code</th>
								<th class="p-4 font-medium">Meaning</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-border">
							{[
								{ code: "200", meaning: "Success. Metadata extracted." },
								{ code: "400", meaning: "Invalid URL or Bad Request." },
								{ code: "429", meaning: "Rate limit exceeded. Slow down!" },
								{ code: "504", meaning: "Timeout. The target site is too slow." }
							].map(row => (
								<tr class="hover:bg-white/5">
									<td class="p-4 font-mono text-primary font-semibold">{row.code}</td>
									<td class="p-4 text-muted">{row.meaning}</td>
								</tr>
							))}
						</tbody>
					</table>
				</div>
			</div>
		</section>

		<section id="contact" class="py-12 border-t border-border dark:border-gray-800">
			<h2 class="text-2xl font-bold mb-2 text-center text-text dark:text-white">Contact & Support</h2>
			<p class="text-muted dark:text-gray-400 text-center mb-8">Need a custom enterprise plan or found a bug? Reach out to us.</p>
			
			<div class="flex flex-wrap justify-center gap-6">

				<a href="https://github.com/sasmithaK/og-miner-fe/issues" target="_blank" class="flex flex-col items-center bg-white dark:bg-[#161b22] border border-border dark:border-gray-800 rounded-lg p-6 w-48 hover:border-primary dark:hover:border-primary hover:-translate-y-1 transition-all group no-underline">
					<svg class="w-8 h-8 mb-3 text-primary group-hover:text-amber-400 transition-colors" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
					</svg>
					<span class="font-semibold text-text dark:text-gray-200 group-hover:text-primary">GitHub</span>
					<span class="text-xs text-muted dark:text-gray-400 mt-1">Report Issues</span>
				</a>

				<a href="https://www.linkedin.com/in/sasmithakg/" target="_blank" class="flex flex-col items-center bg-white dark:bg-[#161b22] border border-border dark:border-gray-800 rounded-lg p-6 w-48 hover:border-primary dark:hover:border-primary hover:-translate-y-1 transition-all group no-underline">
					<svg class="w-8 h-8 mb-3 text-primary group-hover:text-amber-400 transition-colors" viewBox="0 0 24 24" fill="currentColor">
						<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
					</svg>
					<span class="font-semibold text-text dark:text-gray-200 group-hover:text-primary">LinkedIn</span>
					<span class="text-xs text-muted dark:text-gray-400 mt-1">Connect with the Creator</span>
				</a>
			</div>
		</section>
	</main>

	<footer class="border-t border-border dark:border-gray-800 py-8 text-center text-sm text-muted dark:text-gray-400 bg-card dark:bg-[#161b22]">
		<p>&copy; 2026 OG Miner | Documentation Version 1.0 | built with üß° by <a href="https://github.com/sasmithaK" target="_blank" class="text-primary hover:underline">sasmithaK</a></p>
	</footer>

	<script>
		// Tab switching functionality
		document.addEventListener('DOMContentLoaded', () => {
			const tabs = document.querySelectorAll('.code-tab');
			const contents = document.querySelectorAll('.code-content');

			tabs.forEach(tab => {
				tab.addEventListener('click', () => {
					const targetTab = tab.getAttribute('data-tab');

					// Remove active state from all tabs
					tabs.forEach(t => {
						t.classList.remove('text-primary', 'border-b-2', 'border-primary');
						t.classList.add('text-muted');
					});

					// Add active state to clicked tab
					tab.classList.remove('text-muted');
					tab.classList.add('text-primary', 'border-b-2', 'border-primary');

					// Hide all content
					contents.forEach(content => {
						content.classList.add('hidden');
					});

					// Show target content
					const targetContent = document.getElementById(`code-${targetTab}`);
					if (targetContent) {
						targetContent.classList.remove('hidden');
					}
				});
			});
		});
	</script>
</Layout>